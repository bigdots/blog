<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        yzg的个人站
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            放大镜效果的基本实现
        </p>
        <hr>
    </div>
    <div class="post-content">
        <p>话不多说，先上图(没图说JB)：<br><img src="/images/201511/1.gif"></p>
<span id="more"></span>

<h2 id="此图为良心原创"><a href="#此图为良心原创" class="headerlink" title="此图为良心原创"></a><i>此图为良心原创</i></h2><p>A:放大镜<br>B：小图片<br>C：大图片可视区域<br>D：大图片</p>
<h2 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h2><p>鼠标的位置应该在放大镜的中央，所以鼠标位置为：clientX=A.offsetLeft()+B.offsetLeft+1/2*A.offsetWidth;</p>
<p>　　　　　　　　　　　　　　　　　　　　　　　clientY=A.offsetTop()+B.offsetTop+1/2*A.offsetHeight;</p>
<p>鼠标移动过程中:放大镜A和大图D是一起随鼠标成比例运动的，因为当放大镜A的右边框移动到与小图B的右边框重合时，大图D也应该移动到了右边框与C的右边框重合的地方。所以，他们的移动比例是：(D.offsetWidth-C.offsetWidth)/(B.offsetWidth-A.offsetWidth)=b/a</p>
<hr>
<h4 id="HTML代码"><a href="#HTML代码" class="headerlink" title="HTML代码"></a>HTML代码</h4><pre><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;

&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
&lt;title&gt;放大镜效果&lt;/title&gt;


&lt;style&gt;

*&#123;
margin:0;
padding:0; 
&#125;

#demo&#123;
position: relative;
margin:30px 50px;
width: 1000px;
height: 600px;
border: 1px solid #000;
&#125;

#zhezhao&#123;
position: absolute;
z-index:2;
background:red;
width:402px;
height:402px;
left: 20px;
top:20px;
opacity: 0;
&#125;

#small&#123;
position: absolute;
width:402px;
height:402px;
left: 20px;
top:20px;
border: 1px solid #000;
z-index: 1;
&#125;


#small img&#123;
position: absolute;

&#125;


#big&#123;
position: relative;
top: 20px;
left: 460px;
width:500px;
height:500px;
border: 1px solid #000;
overflow: hidden;
display: none;
z-index: 1;
&#125;


#big img&#123;
position: absolute;

&#125;


#glass&#123;
position: absolute;
width:100px;
height: 100px;
opacity: 0.3;
background:orange;
display: none;
&#125;

&lt;/style&gt;


&lt;/head&gt;


&lt;body&gt;
&lt;div id=&#39;demo&#39;&gt;
&lt;div id=&#39;zhezhao&#39;&gt; &lt;/div&gt; 
&lt;!-- 在ie浏览器中，当鼠标在放大镜上是，浏览器并不认为鼠标同样在小图的div上，所以加个遮罩层 兼容ie--&gt;


&lt;div id=&#39;small&#39;&gt; 
&lt;img src=&#39;images/small.png&#39; alt=&#39;&#39;&gt;
&lt;div id=&#39;glass&#39;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#39;big&#39;&gt;
&lt;img src=&#39;images/big.jpg&#39; alt=&#39;&#39; &gt;

&lt;/div&gt;

&lt;/div&gt;



&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<h4 id="JS代码"><a href="#JS代码" class="headerlink" title="JS代码"></a>JS代码</h4><pre><code>&lt;script&gt;

window.onload=function()&#123;
var demo =document.getElementById(&#39;demo&#39;);
var small =document.getElementById(&#39;small&#39;);
var big =document.getElementById(&#39;big&#39;);
var glass =document.getElementById(&#39;glass&#39;)
var image =document.getElementById(&#39;big&#39;).getElementsByTagName(&#39;img&#39;)[0];
var zhezhao=document.getElementById(&#39;zhezhao&#39;);

zhezhao.onmouseover=function()&#123;
glass.style.display=&#39;block&#39;
big.style.display=&#39;block&#39;
&#125;
zhezhao.onmouseout=function()&#123;
glass.style.display=&#39;none&#39;
big.style.display=&#39;none&#39;
&#125;

//弄清楚clientX，offsetLeft，left的关系，注意区分
zhezhao.onmousemove=function(ev)&#123;
var event=ev
var left=event.clientX-demo.offsetLeft-small.offsetLeft-glass.offsetWidth/2;
var top =event.clientY-demo.offsetTop -small.offsetTop -glass.offsetHeight/2;
if(left&lt;0)&#123;
left=0;
&#125;else if(left&gt;(small.offsetWidth-glass.offsetWidth))&#123;
left=small.offsetWidth-glass.offsetWidth
&#125;

if(top&lt;0)&#123;
top=0;
&#125;else if(top&gt;(small.offsetHeight- glass.offsetHeight))&#123;
top=small.offsetHeight- glass.offsetHeight
&#125;
glass.style.left =left+&#39;px&#39;;
glass.style.top =top+&#39;px&#39;;



var percent=(image.offsetWidth-big.offsetWidth)/(small.offsetWidth-glass.offsetWidth)

image.style.left=-percent*left+&#39;px&#39;
image.style.top =-percent*top+&#39;px&#39;



&#125;
&#125;

&lt;/script&gt;
</code></pre>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>-<a class="flink" target="_blank" rel="noopener" href="https://github.com/sanjinhub/hexo-theme-geek">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="cbTPc8u7ho07U6TmlFC0RjK7">
<input type="hidden" id="valine_appKey" value="4hH8asmBIHG3iSVSUt8Hu5OP">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>