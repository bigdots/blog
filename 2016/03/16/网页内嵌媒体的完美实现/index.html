<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        yzg的个人站
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            网页内嵌媒体的完美实现
        </p>
        <hr>
    </div>
    <div class="post-content">
        <p>项目中经常需要用到视频和音频的插入与控制。但在使用中发现要使浏览器完美地呈现视频和音频并不是那么一件简单的事。各个浏览器不同的解析方式导致这一行为实施起来十分地困难。摸了一大堆石头，发现以下方式是可行的。（我所测试的视频格式swf格式，音频是是mp3格式）</p>
<span id="more"></span>

<h2 id="flash视频播放"><a href="#flash视频播放" class="headerlink" title="flash视频播放"></a>flash视频播放</h2><ol>
<li><code>&lt;video&gt;</code>标签定义视频，比如电影片段或其他视频流。<br>这样就解决问题了吗，不，它不支持IE8及以下。<br><img src="/images/201601/videoSuport.png"></li>
</ol>
<p><strong>提示：可以在开始标签和结束标签之间放置文本内容，这样老的浏览器不支持的情况下会显示内部文本。</strong></p>
<ol start="2">
<li><p><code>&lt;embed&gt;</code>标签定义嵌入的内容，比如插件。<br>现在行了吗？还是不行。因为<strong>windows平台的IE利用Activex控件来播放flash而其它的浏览器则 使用Netscape插件技术来播放flash。</strong><br>而<code>&lt;embed&gt;</code>标签是用于Netscape Navigator2.0及以后的浏览器或其它支持Netscape插件的浏览器。</p>
</li>
<li><p><code>&lt;object&gt;</code>标签标签用于包含对象，比如图像、音频、视频、Java applets、ActiveX、PDF 以及 Flash。<br>浏览器的对象支持有赖于对象类型。不幸的是，主流浏览器都使用不同的代码来加载相同的对象类型。<br>而幸运的是，object 对象提供了解决方案。<strong>如果未显示 object 元素，就会执行位于 <code>&lt;object&gt;</code> 和 <code>&lt;/object&gt;</code> 之间的代码。</strong>通过这种方式，我们能够嵌套多个 object 元素（每个对应一个浏览器）。</p>
</li>
</ol>
<p><strong>注释：<param> 标签定义用于对象的 run-time 设置。</strong></p>
<p>最后综合一下就行了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;object id=&quot;&quot; classid=&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;</span><br><span class="line">        codebase=&quot;http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0&quot;</span><br><span class="line">        WIDTH=&quot;740&quot; HEIGHT=&quot;420&quot; id=&quot;myMovieName&quot;&gt;</span><br><span class="line">            &lt;!-- src --&gt;</span><br><span class="line">            &lt;param name=movie value=&quot;http://www.mafengwo.cn/swf/videoPlayer.swf&quot;&gt;</span><br><span class="line">            &lt;param name=quality value=&quot;high&quot;&gt;</span><br><span class="line">            &lt;param name=bgcolor value=&quot;#000&quot;&gt;</span><br><span class="line">            &lt;param name=allowfullscreen value=&quot;true&quot;&gt;</span><br><span class="line">            &lt;param name=wmode value=&quot;transparent&quot;&gt;</span><br><span class="line">            &lt;param name=allowscriptaccess value=&quot;always&quot;&gt;</span><br><span class="line">            &lt;!-- important --&gt;</span><br><span class="line">            &lt;param name=flashvars value=&quot;userid=06232AA4161AAAB6&amp;amp;videoid=E9A575F51098D4C19C33DC5901307461&amp;amp;mode=api&amp;amp;autostart=false&amp;amp;jscontrol=false&quot;&gt;</span><br><span class="line">            &lt;embed src=&quot;http://www.mafengwo.cn/swf/videoPlayer.swf&quot; quality=&quot;high&quot; bgcolor=&quot;#000&quot; width=&quot;740&quot; height=&quot;420&quot;</span><br><span class="line">                        name=&quot;myMovieName&quot; align=&quot;&quot; type=&quot;application/x-shockwave-flash&quot;</span><br><span class="line">                        pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; allowfullscreen=&quot;true&quot; allowscriptaccess=&quot;always&quot; wmode=&quot;transparent&quot; flashvars=&quot;userid=06232AA4161AAAB6&amp;amp;videoid=E9A575F51098D4C19C33DC5901307461&amp;amp;mode=api&amp;amp;autostart=false&amp;amp;jscontrol=false&quot;&gt;</span><br><span class="line">            &lt;/embed&gt;</span><br><span class="line">&lt;/object&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>“classid”和“codebase”属性必须要精确地按上例所示的写法写，它们告诉浏览器自动下载flash player的地址。如果你没有安装过flash player 那么IE3.0以后的浏览器会跳出一个提示框访问是否要自动安装flash player。</li>
<li>“pluginspage”属性告诉浏览器下载flash player的地址，如果还没有安装flash player的话，用户安装完后需要重启浏览器才能正常使用。</li>
</ul>
<h2 id="音频的播放与控制"><a href="#音频的播放与控制" class="headerlink" title="音频的播放与控制"></a>音频的播放与控制</h2><ol>
<li><code>&lt;audio&gt;</code> 标签定义声音，比如音乐或其他音频流。</li>
</ol>
<p><strong>提示：可以在开始标签和结束标签之间放置文本内容，这样老的浏览器不支持的情况下会显示内部文本。</strong><br>它与<code>&lt;video&gt;</code>是相似的，它也同样不支持IE8及以下浏览器。</p>
<ol start="2">
<li><p><code>&lt;audio&gt;</code>+<code>&lt;embed&gt;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio autoplay=&quot;autoplay&quot; id=&quot;audio&quot;&gt;</span><br><span class="line">  &lt;source src=&#123;&#123;audioSrc&#125;&#125; type=&quot;audio/mp3&quot; /&gt;</span><br><span class="line">  &lt;embed id=&quot;embed&quot; height=&quot;0&quot; type=&quot;audio/mp3&quot; src=&#123;&#123;audioSrc&#125;&#125; name=&quot;sound&quot; MASTERSOUND /&gt;</span><br><span class="line">&lt;/audio&gt;</span><br></pre></td></tr></table></figure>
<p>经检测火狐无法播放，其他浏览器可以完美呈现。</p>
</li>
<li><p><code>&lt;object&gt;</code><br>火狐可以完美播放：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">object</span> <span class="attr">data</span>=<span class="string">&#123;&#123;audioSrc&#125;&#125;</span> <span class="attr">type</span>=<span class="string">&quot;application/x-mplayer2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0&quot;</span> <span class="attr">height</span>=<span class="string">&quot;0&quot;</span> <span class="attr">id</span>=<span class="string">&quot;object&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;src&quot;</span> <span class="attr">value</span>=<span class="string">&#123;&#123;audioSrc&#125;&#125;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;autostart&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;playcount&quot;</span> <span class="attr">value</span>=<span class="string">&quot;infinite&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">object</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>现在，我们可以通过浏览器检测的方式，对不同浏览器采用不同的方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(navigator.userAgent.indexOf(<span class="string">&quot;Firefox&quot;</span>)!=-<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">//火狐</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//其他浏览器</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>&lt;audio&gt;</code>、<code>&lt;embed&gt;</code>和<code>&lt;object&gt;</code>的js控制播放和暂停</p>
</li>
</ol>
<ul>
<li><code>&lt;audio&gt;</code> : audio.pause() / audio.play();</li>
<li><code>&lt;embed&gt;</code> : embed.stop() / embed.play();</li>
<li><code>&lt;object&gt;</code> : obj.controls.stop() / obj.controls.play();</li>
</ul>
<p>我的博客:<a target="_blank" rel="noopener" href="http://bigdots.github.io/">http://bigdots.github.io</a>、<a target="_blank" rel="noopener" href="http://www.cnblogs.com/yzg1/">http://www.cnblogs.com/yzg1/</a></p>
<p>如果觉得本文不错的话，帮忙点击下面的推荐哦,谢谢！</p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>-<a class="flink" target="_blank" rel="noopener" href="https://github.com/sanjinhub/hexo-theme-geek">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="cbTPc8u7ho07U6TmlFC0RjK7">
<input type="hidden" id="valine_appKey" value="4hH8asmBIHG3iSVSUt8Hu5OP">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>